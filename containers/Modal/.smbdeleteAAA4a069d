import React, { PropTypes } from 'react';
import ReactDOM from 'react-dom';
import classnames from 'classnames';
import isEmpty from 'lodash/isEmpty';
import omit from 'lodash/omit';
import Portal from './Portal';

class ModalWrap extends React.Component {

    constructor(props){
        super(props)
        this.state = { open: this.props.open || true }
        this.handleClose = this.handleClose.bind(this)
    }

    handleClose(){
        // console.log(this.props);
        this.props.removeModal(this.props.id);
    }

    render() {

        const { type, title } = this.props

        var classes = {
            'uxmodal--open': this.state.open,
        };

        if(!isEmpty(type))
        classes['uxpanel--' + type] = true;

        classes = classnames('uxmodal', classes);

        return (
            <div className={classes} ref="modal" >
                <div className="uxmodal__background"></div>
                <div className="uxmodal__content">
                    <a className="uxmodal__close-button uxmodel__button" role="button" ref='closeButton' onClick={this.handleClose}></a>
                    <div className="uxmodal__body">
                        {this.props.children}
                    </div>
                </div>
            </div>
        );
    }
}


ModalWrap.propTypes = {
    id: PropTypes.string,
    index: PropTypes.number,
    removeModal: PropTypes.func.isRequired,
    options: PropTypes.shape({
        size: PropTypes.string,
        title: PropTypes.string,
        hideCloseButton: PropTypes.bool,
        // closeOnOutsideClick: PropTypes.bool
    })
}

export default ModalWrap;
